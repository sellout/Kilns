(load "library/test-framework")

{test-result {should {use-existing-process-variable}}
             {test {test-use {use}}
                   {use {use}}
                   (trigger {test-use ?y}
                     (trigger {use y} {should-be-use y}))}
             {expected-result {should-be-use {use}}}}

{test-result {should {shadow-existing-process-variable}}
             {test {test-shadow {use}}
                   {shadow {shadow}}
                   (trigger {test-shadow ?y}
                     (trigger {shadow ?y} {should-be-shadow y}))}
             {expected-result {should-be-shadow {shadow}}}}
