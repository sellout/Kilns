;; this just requires the jk pattern language

(load "library/replication")
(load "library/utilities")

(trigger* {sandbox (list ?temp-process {?final-response-channel})}
  (new (sandbox response)
    (trigger (down {response ?result})
      (trigger [sandbox ?completed-process] null)
      {final-response-channel result})
    [sandbox (trigger (down {final-response-channel ?result})
               {response result})
             [sandbox temp-process]]))
